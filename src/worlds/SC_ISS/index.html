<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->
    <!-- <script src="/worlds/hub/scripts/hub.js"></script> -->
    <!-- <script src="/global/js/libs/aframe-physics-system.min.js"></script> -->
    <script src="js/lights-interaction.js"></script>
    <script src="js/gravity-change.js"></script>
  </head>
  <body>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <a-assets>
        <!-- add your assets here. Note that you can use relative links or absolute paths to your world -->
        <!-- credit: HDRMaps @ https://hdrmaps.com/above-the-clouds/ -->
        <img id='skyMap' src='assets/textures/086_hdrmaps_com_free_above_clouds.jpg' crossorigin="anonymous">
        <img id='science' src='assets/textures/science.jpg' crossorigin="anonymous">
        <img id='gravity' src='assets/textures/gravity.jpg' crossorigin="anonymous">
        <img id='sleeping' src='assets/textures/sleeping.jpg' crossorigin="anonymous">
        <a-asset-item id="issModel"   src="/worlds/SC_ISS/assets/models/ISS-Interior-V2/ISS-Interior.gltf" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="issMesh"   src="/worlds/SC_ISS/assets/models/navMeshISS.glb" response-type="arraybuffer"></a-asset-item>
        <audio id="Narr_science-snd" src="/worlds/SC_ISS/assets/audio/Science.mp3" preload="true"></audio>
        <audio id="Narr_living-snd" src="/worlds/SC_ISS/assets/audio/Living.mp3" preload="true"></audio>
        <audio id="Narr_gravity-snd" src="/worlds/SC_ISS/assets/audio/Gravity.mp3" preload="true"></audio>
        
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- just creating an entity that connects many elements together -->
      <a-entity id="game_manager" lights-interactive></a-entity>

      <!-- island 1, with some spawnpoints -->
      <a-entity circles-checkpoint circles-spawnpoint position="-9.419 0.546 6.203"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="-9.419 0.592 9.588"></a-entity>
      <a-entity circles-checkpoint position="-9.359 0.592 -0.405"></a-entity>
      <a-entity circles-checkpoint position="-1.993 0.592 -0.405"></a-entity>
      <a-entity circles-checkpoint position="9.560 0.592 -0.405"></a-entity>
      <a-entity circles-checkpoint position="-10.368 0.592 -9.247"></a-entity>
      <a-entity circles-checkpoint position="-11.901 0.592 -13.205"></a-entity>
      <a-entity circles-checkpoint position="-8.997 0.592 -15.290"></a-entity>
      <a-entity circles-checkpoint position="20.802 0.592 -0.405"></a-entity>
      <a-entity circles-checkpoint position="20.802 0.592 -6.030"></a-entity>
      <a-entity circles-checkpoint position="20.736 0.592 9.541"></a-entity>
      <a-entity circles-checkpoint position="20.736 0.592 4.923"></a-entity>
      <a-entity circles-checkpoint position="20.736 0.592 -10.933"></a-entity>
      <a-entity circles-checkpoint position="3.770 0.592 -0.405"></a-entity>
      <a-entity circles-checkpoint position="-9.349 0.592 -3.716"></a-entity>
      <a-entity circles-checkpoint position="-6.532 0.592 -13.229"></a-entity>
      <a-entity circles-checkpoint position="15.652 0.592 -0.405"></a-entity>

      <!-- gltf-model="#Drill-gltf"  -->

      <a-entity id="Artefact-Science"
                position="-1.178 2.1 0.949" rotation="0 -128.910 0" scale="1 1 1"
                geometry="primitive: plane; height: 0.7; width: 1;"
                material="src: assets/textures/science.jpg;"
                shadow="receive:false; cast:false;"
                circles-sphere-env-map="src:/global/assets/textures/equirectangular/WhiteBlue.jpg"
                circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:0; textLookAt:false; inspectRotation:0 0 0; inspectOffsetY:-0.2;
                                  label_visible:true; label_offset:0 0.8 0; arrow_position:down;
                                  title:Science on the ISS; 
                                  description:Many experiments are done on the international space station, most of them to do with how materials and living beings (like humans) interact with microgravity. They are performed on one of the laboratory modules, of which there are six: Columbus, Destiny, Kibo, Poisk, Rassvet and Nauka.';
                                  label_text:Science;
                                  audio:#Narr_science-snd; volume:0.4;"></a-entity>

      <a-entity id="Artefact-Sleeping"
                position="20.611 2.1 -13.864" rotation="0 0 0" scale="1 1 1"
                geometry="primitive: plane; height: 0.7; width: 1;"
                material="src: assets/textures/sleeping.jpg;"
                shadow="receive:false; cast:false;"
                circles-sphere-env-map="src:/global/assets/textures/equirectangular/WhiteBlue.jpg"
                circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:0; textLookAt:false; inspectRotation:0 0 0; inspectOffsetY:-0.2;
                                  label_visible:true; label_offset:0 0.8 0; arrow_position:down;
                                  title:Living on the ISS; 
                                  description:Living on the ISS is both the same and different to living on earth. Astronauts eat three meals a day plus a snack, but foods must follow specifications so that they provide proper nutrients as well as not spread crumbs all over the station.;
                                  title_back:Sleep and Exercise;
                                  description_back:Astronauts still sleep a regular number of hours, but have to strap themselves into sleeping bags so they don't float away from their sleeping quarters. They must also regularly exercise in order to keep up the strength in their muscles and bones, as weightlessness leads to disuse and deterioration if not counteracted.;
                                  label_text:Living;
                                  audio:#Narr_living-snd; volume:0.4;"></a-entity>
      
      <a-entity id="Artefact-Gravity"
                position="-9.645 2.1 -12.303" rotation="0 0 0" scale="1 1 1"
                geometry="primitive: plane; height: 0.7; width: 1;"
                material="src: assets/textures/gravity.jpg;"
                shadow="receive:false; cast:false;"
                circles-sphere-env-map="src:/global/assets/textures/equirectangular/WhiteBlue.jpg"
                circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:0; textLookAt:false; inspectRotation:0 0 0; inspectOffsetY:-0.2;
                                  label_visible:true; label_offset:0 0.8 0; arrow_position:down;
                                  title:Micro-Gravity; 
                                  description:Although it appears that there is zero gravity on the international space station, the astronauts are actually still affected by the gravity of earth, although to a smaller amount than on earth. The reason they can float around is that they, as well as the station, are in perpetual freefall as they orbit the earth.';
                                  label_text:Gravity;
                                  audio:#Narr_gravity-snd; volume:0.4;"></a-entity>

      <a-entity id="Portal-Wardrobe"
                position="-12.528 1.5 -0.405" rotation="0 50 0"
                circles-portal="img_src:/global/assets/textures/equirectangular/WhiteBlue.jpg; title_text:Wardrobe; link_url:/w/Wardrobe"
                shadow></a-entity>

      <a-entity id="PastLink"
                position="-9.434 1.7 13.440" rotation="0 90 0" scale="1 1 1"
                circles-portal="img_src:#hub360; title_text:Past; link_url:/w/SC_Past"></a-entity>

      <!-- the environment -->
      <a-entity id="iss" position="-9.404 1.762 6.404" rotation="0 0 0" scale="0.2 0.2 0.2" gltf-model="#issModel" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>

      <a-entity id="navmesh" position="-9.404 1.762 6.404" rotation="0 0 0" scale="0.2 0.2 0.2" gltf-model="#navmesh_gltf" visible='false' nav-mesh></a-entity>

      <!-- sky and lights -->
      <a-entity id="sunlight" position="0 20 0" rotation="40 0 0" 
                light="type:directional; intensity:4; color:#d5e4f5; castShadow:false;"></a-entity>
      <a-entity light="type:hemisphere; color:#FFFFFF; groundColor:#BCE2F4; intensity:1.0"></a-entity>
    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
