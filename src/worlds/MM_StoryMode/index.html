<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>
    <!-- Physics script goes after the Circles' head scripts [IMPORTANT]-->
    <script src="/global/js/libs/aframe-physics-system.min.js"></script>
    <script src="/worlds/KIN_FreeFall/components/physics-object.js"></script>
    <script src="/worlds/KIN_FreeFall/components/collision-indicator.js"></script>
    <script src="/worlds/KIN_FreeFall/scripts/experiment-functions.js"></script>
  </head>

  <body onload="setup()">
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>

      <a-camera position="0 1.6 0" rotation="0 0 0"></a-camera>
      <!-- assets -->
      <a-assets timeout="10000">
        <!-- credit: HDRMaps @ https://hdrmaps.com/above-the-clouds/ -->
        <img id='skyMap' src='assets/images/086_hdrmaps_com_free_above_clouds.jpg' crossorigin="anonymous">

        <!-- narration, for some reason when I add this it messes with the spawn point????
        <audio id="Narr_welcome" src="assets/audio/narr_welcome.mp3" preload="true"></audio>-->

        <!-- Models -->
          <a-asset-item id="CPUTerminal_obj" src="/worlds/MM_CreativeMode/assets/models/CPUTerminal.obj"></a-asset-item>
          <a-asset-item id="CPUTerminal_mtl" src="/worlds/MM_CreativeMode/assets/models/CPUTerminal.mtl"></a-asset-item>
          <a-asset-item id="northernElectricPhone_obj" src="/worlds/MM_CreativeMode/assets/models/northernElectricPhone.obj"></a-asset-item>
          <a-asset-item id="northernElectricPhone_mtl" src="/worlds/MM_CreativeMode/assets/models/northernElectricPhone.mtl"></a-asset-item>
          <a-asset-item id="arm_obj" src="assets/models/spaceArmBeta.obj"></a-asset-item>
          <a-asset-item id="arm_mtl" src="assets/models/spaceArmBeta.mtl"></a-asset-item>

        <!-- Environment -->
        <a-asset-item id="room_gltf" src="assets/models/room.gltf" crossorigin="anonymous"></a-asset-item>

        <!-- Images -->
          <img id='IngeniumLogo' src='assets/images/Ingenium-BI-rgb.png' crossorigin="anonymous">
          <img id='hint01' src='assets/images/ingenium_hint01.png' crossorigin="anonymous">
          <img id='hint02' src='assets/images/ingenium_hint02.png' crossorigin="anonymous">
          <img id='hint03' src='assets/images/ingenium_hint03.png' crossorigin="anonymous">
          

        <!-- Hub image -->
        <img id='hub360' src='/worlds/MuseumMysteriesHub/assets/images/MMHubIMG.png' crossorigin="anonymous">

        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- models -->
      <a-entity obj-model="obj: #CPUTerminal_obj; mtl: #CPUTerminal_mtl" position="-2.8 1 9" rotation="0 -90 0"
                shadow="cast:true; receive:true;"></a-entity>
      <a-entity obj-model="obj: #northernElectricPhone_obj; mtl: #northernElectricPhone_mtl"
                position="9.5 1 6"
                shadow="cast:true; receive:true;"></a-entity>  
      <a-entity obj-model="obj: #arm_obj; mtl: #arm_mtl"
                position="-20 0.05 -1.7"
                shadow="cast:true; receive:true;"></a-entity>  
      <a-entity id="placeholdes">        
        <a-entity id="artefact-gem"
                    position="0 1.5 -12" rotation="0 0 0" scale="1 1 1"
                    geometry="primitive:octahedron; radius:0.5;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                      textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; arrow_position:down;
                                      title:[~20-25 chars] Title Front;
                                      description:[~240-280 chars]  This is the FRONT text that will display when an object is picked up. Adjust scale size and text rotation properties to make more visible.;
                                      title_back:[~20-25 chars] Title Back;
                                      description_back:[~240-280 chars] This is the back/secondary text that will display when you rotate the description bubble.;
                                      label_text:Placeholder: Beaker Puzzle Object;"
                    circles-pickup-networked></a-entity>          
        <a-entity id="artefact-gem"
                    position="-2 1.5 -12" rotation="0 0 0" scale="1 1 1"
                    geometry="primitive:octahedron; radius:0.5;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                      textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; arrow_position:down;
                                      title:[~20-25 chars] Title Front;
                                      description:[~240-280 chars]  This is the FRONT text that will display when an object is picked up. Adjust scale size and text rotation properties to make more visible.;
                                      title_back:[~20-25 chars] Title Back;
                                      description_back:[~240-280 chars] This is the back/secondary text that will display when you rotate the description bubble.;
                                      label_text:Placeholder: Beaker Puzzle Object;"
                    circles-pickup-networked></a-entity> 
        <a-entity id="artefact-gem"
                    position="2 1.5 -12" rotation="0 0 0" scale="1 1 1"
                    geometry="primitive:octahedron; radius:0.5;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                      textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; arrow_position:down;
                                      title:[~20-25 chars] Title Front;
                                      description:[~240-280 chars]  This is the FRONT text that will display when an object is picked up. Adjust scale size and text rotation properties to make more visible.;
                                      title_back:[~20-25 chars] Title Back;
                                      description_back:[~240-280 chars] This is the back/secondary text that will display when you rotate the description bubble.;
                                      label_text:Placeholder: Beaker Puzzle Object;"
                    circles-pickup-networked></a-entity>     
        <a-entity id="artefact-gem"
                    position="0.5 1.5 12" rotation="0 0 0" scale="1 1 1"
                    geometry="primitive:octahedron; radius:0.5;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                      textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; arrow_position:down;
                                      title:[~20-25 chars] Title Front;
                                      description:[~240-280 chars]  This is the FRONT text that will display when an object is picked up. Adjust scale size and text rotation properties to make more visible.;
                                      title_back:[~20-25 chars] Title Back;
                                      description_back:[~240-280 chars] This is the back/secondary text that will display when you rotate the description bubble.;
                                      label_text:Placeholder:Placeholder: Cleaning Task Objectt;"
                    circles-pickup-networked></a-entity>          
        <a-entity id="artefact-gem"
                    position="2 1.5 12" rotation="0 0 0" scale="1 1 1"
                    geometry="primitive:octahedron; radius:0.5;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                      textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; arrow_position:down;
                                      title:[~20-25 chars] Title Front;
                                      description:[~240-280 chars]  This is the FRONT text that will display when an object is picked up. Adjust scale size and text rotation properties to make more visible.;
                                      title_back:[~20-25 chars] Title Back;
                                      description_back:[~240-280 chars] This is the back/secondary text that will display when you rotate the description bubble.;
                                      label_text:Placeholder: Cleaning Task Object;"
                    circles-pickup-networked></a-entity> 
        <a-entity id="artefact-gem"
                    position="3.5 1.5 12" rotation="0 0 0" scale="1 1 1"
                    geometry="primitive:octahedron; radius:0.5;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                      textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; arrow_position:down;
                                      title:[~20-25 chars] Title Front;
                                      description:[~240-280 chars]  This is the FRONT text that will display when an object is picked up. Adjust scale size and text rotation properties to make more visible.;
                                      title_back:[~20-25 chars] Title Back;
                                      description_back:[~240-280 chars] This is the back/secondary text that will display when you rotate the description bubble.;
                                      label_text:Placeholder: Cleaning Task Object;"
                    circles-pickup-networked></a-entity> 
        </a-entity>
      
      <!-- Text -->
      <a-entity id="Welcome" position="9.5 2 5.5" scale="1 1 1" rotation="0 0 0" text="value: “Welcome to your first day on the job!\n You will need to clean the artifacts so we can put them on the floor ASAP!\n Email me when you are finished with the job then you are good to go\n Good luck!”; color: #fff; width: 1.7; wrapCount: 35; align: center; tabSize: 4.43; font: /worlds/KIN_Hub/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"></a-entity>
      
      <!-- hints for computor password puzzle -->
        <a-image src="#IngeniumLogo" position="-3 1.1 7.5" rotation="-80 -90 0"></a-image>
        <a-image src="#hint01" position="-4 1.005 -12.4" rotation="-90 0 0" scale="2 0.5 1"></a-image>
        <a-image src="#hint02" position="-9 0.005 0" rotation="-90 90 0" scale="10 2 1"></a-image>
        <a-image src="#hint03" position="3 1.005 11" rotation="-90 180 0" scale="2 0.5 1"></a-image>

      <!-- Portal to back to MM Hub --> 
        <a-entity id="backToHubTXT" 
                  position="14 3 8" scale="1.5 1.5 1.5" rotation="0 -90 0"
                  text="value: Back To Hub; color: #f29f05; width: 3; wrapCount: 30; align: center; tabSize: 4.43; font: /worlds/KIN_Hub/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"></a-entity>
      <a-entity id="HubLink"
            position="14 1.5 8" rotation="0 180 0" scale="1 1 1"
            circles-portal="img_src:#hub360; title_text:Click me to be teleported; text_color:black; link_url:/w/MuseumMysteriesHub"></a-entity>
            
      </a-entity>

      <!-- Checkpoints -->
      <a-entity circles-checkpoint circles-spawnpoint position="12 0.05 8"></a-entity>
      <a-entity circles-checkpoint position="9.5 0.05 8"></a-entity>
      <a-entity circles-checkpoint position="5 0.05 8"></a-entity>
      
      <a-entity circles-checkpoint position="2.5 0.05 8"></a-entity>
      <a-entity circles-checkpoint position="0 0.05 8"></a-entity>
      <a-entity circles-checkpoint position="-3.5 0.05 4.75"></a-entity>
      <a-entity circles-checkpoint position="-4.25 0.05 9"></a-entity>
      <a-entity circles-checkpoint position="3.5 0.05 4.75"></a-entity>
      <a-entity circles-checkpoint position="0 0.05 3"></a-entity>

      <a-entity circles-checkpoint position="0 0.05 0"></a-entity>
      <a-entity circles-checkpoint position="-5 0.05 0.719"></a-entity>
      <a-entity circles-checkpoint position="4 0.05 -1.7"></a-entity>

      <a-entity id="bkShelveCHK01" circles-checkpoint position="-5 0.05 -7"></a-entity>
      <a-entity id="bkShelveCHK02" circles-checkpoint position="-2 0.05 -7"></a-entity>
      <a-entity id="bkShelveCHK03" circles-checkpoint position="0 0.05 -7"></a-entity>
      <a-entity id="bkShelveCHK04" circles-checkpoint position="2 0.05 -7"></a-entity>
      <a-entity id="bkShelveCHK05" circles-checkpoint position="5 0.05 -7"></a-entity>
      <a-entity id="beakersCHK01" circles-checkpoint position="-5 0.05 -10.5"></a-entity>
      <a-entity id="beakersCHK02" circles-checkpoint position="-2 0.05 -10.5"></a-entity>
      <a-entity id="beakersCHK03" circles-checkpoint position="0 0.05 -10.5"></a-entity>
      <a-entity id="beakersCHK04" circles-checkpoint position="2 0.05 -10.5"></a-entity>
      <a-entity id="beakersCHK05" circles-checkpoint position="5 0.05 -10.5"></a-entity>

      <!-- envir -->
      <a-entity id="grass" position="0 -1 0"  geometry="primitive:box; depth:50; width:50; height:1;" material="color:#63A350;" body="type:static; mass:0; shape:box;" circles-shadow></a-entity>
      <a-entity id="room" 
                gltf-model="#room_gltf"
                position="0 0 0"
                shadow></a-entity>
      <a-entity light="type:ambient; color:#FFF; intensity:3.0"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 1.0" position="0 1 1"></a-entity>
      <a-entity light="type: spot; color: #FFF; intensity: 1.0" position="10 5 6" rotation="-90 0 0"></a-entity>
      <a-entity id='skyBox'
                rotation='0 200 0'
                geometry='primitive:sphere; radius:50; segments-height:24; segments-width:24;'
                material='shader:flat; src:#skyMap; side:back;'>
      </a-entity>
      <a-entity id="MMSMInstructions" position="17 0.05 -1.7" text="value: FREE FALL; color: #13446e; width: 1.7; wrapCount: 30; align: center; tabSize: 4.43; font: /worlds/KIN_Hub/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60" scale="1.5 1.5 1.5" rotation="-90 0 0"></a-entity>
    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
