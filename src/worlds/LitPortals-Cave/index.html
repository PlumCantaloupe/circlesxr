<html>
  <head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="style.css">
    <script>
      window.addEventListener('load', () => {
        const fireSound = document.getElementById('fireCrackling-snd');
        if (fireSound) {
          console.log('Audio file is loaded.');
        } else {
          console.log('Audio file not loaded.');
        }
      });
    </script>
    
    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->

    <script src="js/sorting-component.js"></script> 
    <script src="js/cave_networking.js"></script> 
    <script src="components/toggle-movement.js"></script>
    <script src="components/toggle-canvas.js"></script>
    <script src="components/update-canvas.js"></script>
    <script src="/socket.io/socket.io.js"></script>


  </head>
  <body>
    
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- cave painting stuff -->
    <div id="canvasDiv">
      <div class="center">
      <button onclick="toggleCanvas()"> exit painting</button>
      <canvas id="drawCanvas" width="512" height="512" style="border:1px solid #000000;" ></canvas>
      </div>
    </div>
  
    <script>
      let toggleCanvas = function (){
        document.getElementById("canvasDiv").style.visibility = "hidden";
      }
    </script>
      <!-- cave painting stuff end-->
  

    
   

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties >
      <a-light type="ambient" color="#666"></a-light>

      <a-assets>
        <a-asset-item id="campfire-gltf"  src="/worlds/LitPortals-Cave/assets/models/campfire.glb" response-type="arraybuffer"></a-asset-item>
        <audio id="fireCrackling-snd" src="assets/sounds/fire.mp3" preload="true"></audio>

        <!-- add your assets here. Note that you can use relative links or absolute paths to your world -->
        <!-- credit: HDRMaps @ https://hdrmaps.com/above-the-clouds/ <img id='skyMap' src='assets/textures/086_hdrmaps_com_free_above_clouds.jpg' crossorigin="anonymous">-->

         <!-- AUDIO -->
        <!-- credit: "magic" music - https://soundcloud.com/royaltyfreebackgroundmusic/sets/creative-commons-music-365 -->
        
        <a-sound id="ding" src="assets/sounds/ding.mp3" preload="auto" position="11.5 0.7 -14.4"></a-sound>
        <!--credit:https://pixabay.com/sound-effects/ding-101492/-->
        <a-sound id="buzzer" src="assets/sounds/buzzer.mp3" preload="auto" position="11.5 0.7 -14.4"></a-sound>
        <!--credit: https://pixabay.com/sound-effects/wrong-47985/-->
        <a-sound id="trumpet" src="assets/sounds/trumpet.mp3" preload="auto" position="11.5 0.7 -14.4"></a-sound>
        <!--credit:https://uppbeat.io/sfx/winner-trumpet-fanfare/11352/29787-->

        <!-- credit: https://freesound.org/people/LittleRobotSoundFactory/sounds/270387/  -->
         <a-sound id="cave_Amb-snd" src="assets/sounds/cave_Ambience.wav" preload="true"></a-sound>

        <!-- gltf models -->
        <a-asset-item id="caveBaseModel" response-type="arraybuffer" src="/worlds/LitPortals-Cave/assets/models/cave_base.glb"></a-asset-item>
        <a-asset-item id="rockModel" response-type="arraybuffer" src="/worlds/LitPortals-Cave/assets/models/rock_model/scene.gltf"></a-asset-item>
        <a-asset-item id="torchModel"response-type="arraybuffer"src="assets/models/torch.glb"></a-asset-item>

        <!-- Artefact textures -->
         <img id="cavePainting-img" src="assets/wall_art1.jpg">
         <img id="ivoryBison-img" src="assets/Ivory Bison.jpg">
         <img id="venus-img" src="assets/sculpture_2.jpg">



        

       
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>
      
      <!-- just creating an entity that connects many elements together -->

      <!-- adding ambient sounds -->
       <a-entity circles-sound="src:#cave_Amb-snd; type:ambience; autoplay:true; loop:true; volume:0.3;"></a-entity>
      <!-- Area 1, with some spawnpoints -->

      <!--Cave base-->
      <a-entity id="caveBase" position="-5.9 3.5 -10" scale= "0.4 0.4 0.18" gltf-model="#caveBaseModel"></a-entity>
      <!--rocks-->
      <a-entity id="rock" position="0 0 3" scale= "0.001 0.001 0.001" gltf-model="#rockModel"></a-entity>
      <a-entity id="rock1" position="-1.83 0.145" scale= "0.005 0.005 0.005" gltf-model="#rockModel"></a-entity>


      <!-- Campfire -->
      <a-entity id = "campfireSet">
        <a-entity id="fireRig" position="0.0 0.0 -14" visible="false">
        <a-entity position="0 0 0" id="fire">
          <!-- Layer 1: Base fire cones -->
          <a-cone position="0 0 0" radius-bottom="0.3" radius-top="0" height="1.2" color="orange" animation="property: position; to: 0 1 0; dir: alternate; dur: 800; loop: true;"></a-cone>
          <a-cone position="0.2 0 0" radius-bottom="0.2" radius-top="0" height="1" color="yellow" animation="property: position; to: 0.2 1 0; dir: alternate; dur: 700; loop: true;"></a-cone>
          <a-cone position="-0.2 0 0" radius-bottom="0.2" radius-top="0" height="0.9" color="red" animation="property: position; to: -0.2 1 0; dir: alternate; dur: 900; loop: true;"></a-cone>
  
          <!-- Layer 2: Smaller flames -->
          <a-cone position="0 0.5 0" radius-bottom="0.1" radius-top="0" height="0.6" color="orange" animation="property: position; to: 0 1 0; dir: alternate; dur: 600; loop: true;"></a-cone>
          <a-cone position="0.1 0.5 0" radius-bottom="0.05" radius-top="0" height="0.4" color="yellow" animation="property: position; to: 0.1 1 0; dir: alternate; dur: 700; loop: true;"></a-cone>
          <a-cone position="-0.1 0.5 0" radius-bottom="0.05" radius-top="0" height="0.5" color="red" animation="property: position; to: -0.1 1 0; dir: alternate; dur: 800; loop: true;"></a-cone>
        </a-entity>

        <a-entity id="fireParticlesSound"
            class="ambient-music"
            fire="particles:200;"
            position="0.0 -0.2 0.0"
            sound="src:#fireCrackling-snd; autoplay:false; loop:true; refDistance:2.0; rolloffFactor:2.0; volume:1; distanceModel:exponential;">
        </a-entity>
            <a-entity id = "firelight" animation="property:position; dur:223; to:0.0 0.0 0.05; loop:true; dir:alternate; easing:easeInOutExpo">
                <a-entity position="0.0 1.5 0.0" animation="property:position; dur:163; to:0.0 1.55 0.0; loop:true; dir:alternate; easing:linear">
                    <a-entity light="type: point; color: #FFA200; intensity: 5; distance: 20.0; castShadow: true; shadowMapHeight: 256; shadowMapWidth: 256;"
                              animation="property:light.intensity; dur:293; dir:alternate; to:3.6; loop:true; easing:easeInOutExpo">
                    </a-entity>
                </a-entity>
            </a-entity>
        </a-entity>
        <a-entity id="campfire_label" position="0.0 0.0 -14" circles-label="text:click fire to start; visible:true; offset:1.0 0.4 0 ; arrow_position:left;"></a-entity>
        <a-entity id="campfire"
        position="0.0 0.0 -14"
        class="interactive"
        gltf-model="#campfire-gltf"
        shadow="receive: true; cast: true"
        circles-interactive-object="type:highlight"
        onclick="toggleFire();">
        </a-entity>
      </a-entity>

      <!-- room -->

      <!--Cave base-->
      <a-entity id="caveBase" position="-5.9 3.5 -10" scale= "0.4 0.4 0.18" gltf-model="#caveBaseModel"></a-entity>
      <a-entity id="torch-model" position="11.21 1.43 -10.54" gltf-model="#torchModel" scale="26.2 26.2 26.2"rotation="0 0 26.35"></a-entity>

      <!-- pick up objects 
      This line lets an object be picked up - needs to click on it twice for full controls        
      circles-pickup-object="pickupPosition: 0 1 -1; pickupScale: 0.5 0.5 0.5" 
      
      circles-pickup-object="pickupPosition: 0 1 -1; pickupScale: 0.5 0.5 0.5" 
      -->

      <a-box id="box" 
        circles-pickup-networked
        position="8 1 0" scale="0.5 0.5 0.5" color="red">
      </a-box>

       <!-- gems with text box
        can be instructions or welcome message
        these are networked-->
        
      <a-entity id="instructions-1"
                position="6.3 1 -14" rotation="0 45 0" scale="1 1 1"
                geometry="primitive:octahedron; radius:0.5;"
                material="color:rgb(255, 100, 20); roughness:0.2; metalness:0.8;"
                circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                  textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; label_arrow_position:down;
                                  title:Sorting Game;
                                  description:These vases are all mixed up! Can you help sort them out on the ground?;
                                  title_back:About the vases:;
                                  description_back: ;
                                  description_offset:0 0.5 0;
                                  desc_arrow_position:down;
                                  label_text:Activity Info;"
                circles-pickup-networked></a-entity>

      <a-entity id="cavePainting-artefact"
                position="-11 1 -9.5" rotation="0 -45 0" scale="1 1 1"
                geometry="primitive: plane; height:1; width:1;"
                material="src: #cavePainting-img; side:double;"
                circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                  textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; label_arrow_position:down;
                                  title: Cave Painting;
                                  description:Usually found on the wall or ceilings, cave paintings are the oldest form of art! They were found roughly 40,000 years ago, usually depicting animals. Researchers are not 100% sure of its purpose but suggest that they told stories.;
                                  title_back:;
                                  description_back:;
                                  description_offset:0 0.5 0;
                                  desc_arrow_position:down;
                                  label_text:Cave Painting;"
                circles-pickup-networked></a-entity>

                <a-entity id="ivoryBison-artefact"
                position="-7.8 1 -20.2" rotation="0 55 0" scale="1 1 1"
                geometry="primitive: plane; height:1; width:1;"
                material="src: #ivoryBison-img; side:double;"
                circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                  textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; label_arrow_position:down;
                                  title: Ivory Bison Carving;
                                  description:The Neolithic ivory bison is a carved figure from the Magdalenian period (around 12,000 to 17,000 years ago) made from ivory. It represents the importance of animals, particularly bison, in the lives and possibly spiritual beliefs of prehistoric humans.;
                                  title_back:;
                                  description_back:;
                                  description_offset:0 0.5 0;
                                  desc_arrow_position:down;
                                  label_text:Carved Figure;"
                circles-pickup-networked></a-entity>    

                <a-entity id="venus-artefact"
                position="5.9 1 -7.1" rotation="0 55 0" scale="1 1 1"
                geometry="primitive: plane; height:1; width:1;"
                material="src: #venus-img; side:double;"
                circles-artefact="inspectPosition:0 0 0; inspectRotation:0 0 0; inspectScale:0.8 0.8 0.8;
                                  textRotationY:90.0; labelLookAt:true; descriptionLookAt:true; label_offset:0.0 1.0 0.0; label_arrow_position:down;
                                  title: Venus of Brassempouy;
                                  description:The image depicts the Venus of Brassempouy, an ivory carving of a human head dating back approximately 23,000 years. This artifact is one of the earliest known representations of the human form and is considered a significant example of Upper Paleolithic art.;
                                  title_back:;
                                  description_back:;
                                  description_offset:0 0.5 0;
                                  desc_arrow_position:down;
                                  label_text:Venus Ivory Carving;"
                circles-pickup-networked></a-entity>    

      <!--artifacts (vases go here)--> 
      <a-sphere id="artifact1" class="sorting_item" data-order="4" data-correct="false" sorting-collision 
        circles-pickup-object="pickupPosition: 0 1 -1; pickupScale: 0.5 0.5 0.5"
        position="12.5 2.5 -15.1" scale="0.4 0.4 0.4" color="red"></a-sphere>
      <a-sphere id="artifact2" class="sorting_item" data-order="3" data-correct="false" sorting-collision
        circles-pickup-object="pickupPosition: 0 1 -1; pickupScale: 0.5 0.5 0.5"
        position="12.5 2.5 -14.2" scale="0.4 0.4 0.4" color="yellow"></a-sphere>
      <a-sphere id="artifact3" class="sorting_item" data-order="2" data-correct="false" sorting-collision
        circles-pickup-object="pickupPosition: 0 1 -1; pickupScale: 0.5 0.5 0.5"
        position="12.5 2.5 -13.3" scale="0.4 0.4 0.4" color="green"></a-sphere>
      <a-sphere id="artifact4" class="sorting_item" data-order="1" data-correct="false" sorting-collision
        circles-pickup-object="pickupPosition: 0 1 -1; pickupScale: 0.5 0.5 0.5"
        position="12.5 2.5 -12.5" scale="0.4 0.4 0.4" color="blue"></a-sphere>

      <!--detection box-->
      <a-box class="collisionbox" id="goal-1" sorting-collision
        position="11.5 0.7 -15.7" color="tan" rotation="0 0 0" depth="0.1" height="0.6" width="0.3" opacity="0.2"></a-box>
      <a-box class="collisionbox" id="goal-2" sorting-collision
        position="11.5 0.7 -14.4" color="tan" rotation="0 0 0" depth="0.1" height="0.6" width="0.3" opacity="0.2"></a-box>
      <a-box class="collisionbox" id="goal-3" sorting-collision 
        position="11.5 0.7 -13.1" color="tan" rotation="0 0 0" depth="0.1" height="0.6" width="0.3" opacity="0.2"></a-box>
      <a-box class="collisionbox" id="goal-4" sorting-collision 
        position="11.5 0.7 -11.8s" color="tan" rotation="0 0 0" depth="0.1" height="0.6" width="0.3" opacity="0.2"></a-box>

      <!--pedestal-->
      <a-cylinder position="11.5 0.1 -15.7" color="tan" rotation="0 0 0" scale="0.3 0.3 0.3"></a-cylinder>
      <a-cylinder position="11.5 0.1 -14.4" color="tan" rotation="0 0 0" scale="0.3 0.3 0.3"></a-cylinder>
      <a-cylinder position="11.5 0.1 -13.1" color="tan" rotation="0 0 0" scale="0.3 0.3 0.3"></a-cylinder>
      <a-cylinder position="11.5 0.1 -11.8" color="tan" rotation="0 0 0" scale="0.3 0.3 0.3"></a-cylinder>
      <!--<a-box position="9 0 0.5" color="brown" depth="4" height="1" width="1"></a-box>-->


      <!-- teleport pads-->
      <a-entity id="Portals and Pads">
        <a-entity circles-checkpoint position="4.4 0 -21.5"></a-entity>
        <a-entity circles-checkpoint position="-7 0 -19"></a-entity>
        <a-entity circles-checkpoint position="5 0 -7"></a-entity>
        <a-entity circles-checkpoint position="-9 0 -7"></a-entity>
        
        <a-entity circles-checkpoint position="-1.6 0 -14"></a-entity>
        <a-entity circles-checkpoint position="1.6 0 -14"></a-entity>
        <a-entity circles-checkpoint position="0 0 -16"></a-entity>
        <a-entity circles-checkpoint position="0 0 -12"></a-entity>

        <a-entity circles-checkpoint position="-10 0 -12.9"></a-entity>
        <a-entity circles-checkpoint position="-10 0 -16.2"></a-entity>
        
        <a-entity circles-checkpoint position="9 0 -13.9"></a-entity>
        <a-entity circles-checkpoint position="9 0 -19.5"></a-entity>
        <a-entity circles-checkpoint position="9 0 -19.5"></a-entity>


        <a-entity id="Portal-Lobby"
        position="-0.27 1.7 2.5" scale="5.3 5.3 1"
        circles-portal="img_src:/global/assets/textures/equirectangular/WhiteBlue.jpg; title_text:Lobby; link_url:/w/LitPortals-Lobby"
        shadow></a-entity>

        <a-entity id="LitPortals-Future"
        position="-0.27 1.7 -30" scale="5.3 5.3 1"
        circles-portal="img_src:/global/assets/textures/equirectangular/WhiteBlue.jpg; title_text:Future; link_url:/w/LitPortals-Future"
        shadow></a-entity>
      </a-entity>

      <!-- Cave painting interaction -->
      <a-entity id = "drawGroup" position="-2.11 0 -14.4"  rotation="0 130 0">
        <!-- Plane where the drawing will display -->
        <a-entity update-canvas position="6.5 1.7 -8" rotation="0 -45 0" geometry=" primitive: plane; height:3; width:3;" material="src: #drawCanvas;"> </a-entity>

        <!-- Button to start the interaction -->
        <a-entity circles-button="type:cylinder" position="4.7 1.1 -8.8" toggle-canvas>
          <!-- TO FIX: clicking bubble triggers button -->
          <a-entity circles-label="text:cave painting; offset:0 0.8 0; arrow_position:down;"></a-entity>
        </a-entity>
        <a-entity geometry="primitive:cylinder; radius:0.32; height:1;" position="4.7 0.5 -8.8" material="color:white"></a-entity>
      </a-entity>
    

      <!-- Area 2, top -->
      <a-entity id = "torchGroup">
        <a-entity id = "torch1" position="-5.96 2.3 -2.2" rotation="0 0 0">
        <a-entity id = "firelight" animation="property:position; dur:223; to:0.0 0.0 0.05; loop:true; dir:alternate; easing:easeInOutExpo">
          <a-entity position="0.0 1.5 0.0" animation="property:position; dur:163; to:0.0 1.55 0.0; loop:true; dir:alternate; easing:linear">
              <a-entity light="type: point; color: #FFA200; intensity: 2; distance: 20.0; castShadow: true; shadowMapHeight: 256; shadowMapWidth: 256;"
                        animation="property:light.intensity; dur:270; dir:alternate; to:1; loop:true; easing:easeInOutExpo">
              </a-entity>
          </a-entity>
        </a-entity>
          <a-entity position="0 0.348 -0.21" rotation="-30 0 0"id="fire">
            <!-- Layer 1: Base fire cones -->
            <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.1" color="orange" animation="property: position; to: 0 0.05 0; dir: alternate; dur: 800; loop: true;"></a-cone>
            <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.2" color="yellow" animation="property: position; to: 0.1 0.05 0.1; dir: alternate; dur: 700; loop: true;"></a-cone>
            <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.15" color="red" animation="property: position; to: -0.1 0.05 0; dir: alternate; dur: 900; loop: true;"></a-cone>
          </a-entity>
          <a-cylinder position="0 -0.37 0.226" scale="0.1 1.6 0.1" rotation="-30 0 0" color="brown"></a-cylinder>
        </a-entity>
        <a-entity id = "torch2" position="-12.8 2.3 -10.55" rotation="0 -90 0">
          <a-entity id = "firelight" animation="property:position; dur:223; to:0.0 0.0 0.05; loop:true; dir:alternate; easing:easeInOutExpo">
            <a-entity position="0.0 1.5 0.0" animation="property:position; dur:163; to:0.0 1.55 0.0; loop:true; dir:alternate; easing:linear">
                <a-entity light="type: point; color: #FFA200; intensity: 2; distance: 20.0; castShadow: true; shadowMapHeight: 256; shadowMapWidth: 256;"
                          animation="property:light.intensity; dur:293; dir:alternate; to:1; loop:true; easing:easeInOutExpo">
                </a-entity>
            </a-entity>
          </a-entity>
            <a-entity position="0 0.348 -0.21" rotation="-30 0 0"id="fire">
              <!-- Layer 1: Base fire cones -->
              <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.1" color="orange" animation="property: position; to: 0 0.05 0; dir: alternate; dur: 800; loop: true;"></a-cone>
              <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.2" color="yellow" animation="property: position; to: 0.1 0.05 0.1; dir: alternate; dur: 700; loop: true;"></a-cone>
              <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.15" color="red" animation="property: position; to: -0.1 0.05 0; dir: alternate; dur: 900; loop: true;"></a-cone>
            </a-entity>
            <a-cylinder position="0 -0.37 0.226" scale="0.1 1.6 0.1" rotation="-30 0 0" color="brown"></a-cylinder>
          </a-entity>
        <a-entity id = "torch3" position="-12.8 2.3 -17.8" rotation="0 -90 0">
            <a-entity id = "firelight" animation="property:position; dur:223; to:0.0 0.0 0.05; loop:true; dir:alternate; easing:easeInOutExpo">
              <a-entity position="0.0 1.5 0.0" animation="property:position; dur:163; to:0.0 1.55 0.0; loop:true; dir:alternate; easing:linear">
                  <a-entity light="type: point; color: #FFA200; intensity: 2; distance: 20.0; castShadow: true; shadowMapHeight: 256; shadowMapWidth: 256;"
                            animation="property:light.intensity; dur:350; dir:alternate; to:1; loop:true; easing:easeInOutExpo">
                  </a-entity>
              </a-entity>
            </a-entity>
              <a-entity position="0 0.348 -0.21" rotation="-30 0 0"id="fire">
                <!-- Layer 1: Base fire cones -->
                <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.1" color="orange" animation="property: position; to: 0 0.05 0; dir: alternate; dur: 800; loop: true;"></a-cone>
                <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.2" color="yellow" animation="property: position; to: 0.1 0.05 0.1; dir: alternate; dur: 700; loop: true;"></a-cone>
                <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.15" color="red" animation="property: position; to: -0.1 0.05 0; dir: alternate; dur: 900; loop: true;"></a-cone>
              </a-entity>
              <a-cylinder position="0 -0.37 0.226" scale="0.1 1.6 0.1" rotation="-30 0 0" color="brown"></a-cylinder>
          </a-entity>
        <a-entity id = "torch4" position="12.2 2.3 -18" rotation="0 90 0">
              <a-entity id = "firelight" animation="property:position; dur:223; to:0.0 0.0 0.05; loop:true; dir:alternate; easing:easeInOutExpo">
                <a-entity position="0.0 1.5 0.0" animation="property:position; dur:163; to:0.0 1.55 0.0; loop:true; dir:alternate; easing:linear">
                    <a-entity light="type: point; color: #FFA200; intensity: 2; distance: 20.0; castShadow: true; shadowMapHeight: 256; shadowMapWidth: 256;"
                              animation="property:light.intensity; dur:400; dir:alternate; to:1; loop:true; easing:easeInOutExpo">
                    </a-entity>
                </a-entity>
              </a-entity>
                <a-entity position="0 0.348 -0.21" rotation="-30 0 0"id="fire">
                  <!-- Layer 1: Base fire cones -->
                  <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.1" color="orange" animation="property: position; to: 0 0.05 0; dir: alternate; dur: 800; loop: true;"></a-cone>
                  <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.2" color="yellow" animation="property: position; to: 0.1 0.05 0.1; dir: alternate; dur: 700; loop: true;"></a-cone>
                  <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.15" color="red" animation="property: position; to: -0.1 0.05 0; dir: alternate; dur: 900; loop: true;"></a-cone>
                </a-entity>
                <a-cylinder position="0 -0.37 0.226" scale="0.1 1.6 0.1" rotation="-30 0 0" color="brown"></a-cylinder>
          </a-entity>
        <a-entity id = "torch5" position="12.2 2.3 -11" rotation="0 90 0">
                <a-entity id = "firelight" animation="property:position; dur:223; to:0.0 0.0 0.05; loop:true; dir:alternate; easing:easeInOutExpo">
                  <a-entity position="0.0 1.5 0.0" animation="property:position; dur:163; to:0.0 1.55 0.0; loop:true; dir:alternate; easing:linear">
                      <a-entity light="type: point; color: #FFA200; intensity: 2; distance: 20.0; castShadow: true; shadowMapHeight: 256; shadowMapWidth: 256;"
                                animation="property:light.intensity; dur:200; dir:alternate; to:1; loop:true; easing:easeInOutExpo">
                      </a-entity>
                  </a-entity>
                </a-entity>
                  <a-entity position="0 0.348 -0.21" rotation="-30 0 0"id="fire">
                    <!-- Layer 1: Base fire cones -->
                    <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.1" color="orange" animation="property: position; to: 0 0.05 0; dir: alternate; dur: 800; loop: true;"></a-cone>
                    <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.2" color="yellow" animation="property: position; to: 0.1 0.05 0.1; dir: alternate; dur: 700; loop: true;"></a-cone>
                    <a-cone position="0 0 0" radius-bottom="0.15" radius-top="0" height="0.15" color="red" animation="property: position; to: -0.1 0.05 0; dir: alternate; dur: 900; loop: true;"></a-cone>
                  </a-entity>
                  <a-cylinder position="0 -0.37 0.226" scale="0.1 1.6 0.1" rotation="-30 0 0" color="brown"></a-cylinder>
          </a-entity>
      </a-entity>
      <!-- Area 2, steps -->
    
      <!-- Area 3 -->

      <!-- ambient music/sound 
      <a-entity position="0 0 0" circles-sound="type:music; src:#magic_music; autoplay:true; loop:true; volume:0.02;"></a-entity>
      -->

      <!-- example "artefact" -->


      <!-- leaving this out for now as it doesn't play nice on mobile and VR -->

      <!-- the environment -->
      
      
      <!-- sky and lights -->
      <a-entity light="type:hemisphere; color:#FFFFFF; groundColor:#BCE2F4; intensity:1"></a-entity>

    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
  <script src='canvas.js'></script>
</html>
