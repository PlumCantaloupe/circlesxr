<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->
    <!-- <script src="/worlds/hub/scripts/hub.js"></script> -->
    
    <!--Environment Script-->
    <script src="https://unpkg.com/aframe-environment-component@1.5.x/dist/aframe-environment-component.min.js"></script>
    <script src="js/manager.js"></script>
    <script src="js/hold.js"></script>
    <script src="js/rover.js"></script>
    <script src="js/interactEvents.js"></script>
  </head>
  <body>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <a-assets>
        <!-- add your assets here. Note that you can use relative links or absolute paths to your world -->
        <!-- Circles' built-in assets [REQUIRED] -->

        <!--images-->
        <!--sojourner hologram images-->
        <img id="soj_wheel_00" src="assets/imgs/sojourner_wheel_red.png">
        <img id="soj_wheel_01" src="assets/imgs/sojourner_wheel_blue.png">
        <img id="soj_laser_00" src="assets/imgs/sojourner_laser_red.png">
        <img id="soj_laser_01" src="assets/imgs/sojourner_laser_blue.png">
        <img id="soj_cam_00"   src="assets/imgs/sojourner_camera_red.png">
        <img id="soj_cam_01"   src="assets/imgs/sojourner_camera_blue.png">

        <!--perseverance hologram images-->
        <img id="pers_part_radar_00" src="assets/imgs/perseverance_rimfax_red.png">
        <img id="pers_part_radar_01" src="assets/imgs/perseverance_rimfax_blue.png">
        <img id="pers_part_cam_00" src="assets/imgs/perseverance_supercam_red.png">
        <img id="pers_part_cam_01" src="assets/imgs/perseverance_supercam_blue.png">
        <img id="pers_part_Meda_00" src="assets/imgs/perseverance_meda_red.png">
        <img id="pers_part_Meda_01" src="assets/imgs/perseverance_meda_blue.png">

        <!--curiosity hologram images-->
        <img id="curi_part_hand_00" src="assets/imgs/curiosity_roboticHand_red.png">
        <img id="curi_part_hand_01" src="assets/imgs/curiosity_roboticHand_blue.png">
        <img id="curi_part_bat_00" src="assets/imgs/curiosity_powerSystem_red.png">
        <img id="curi_part_bat_01" src="assets/imgs/curiosity_powerSystem_blue.png">
        <img id="curi_part_cam_00" src="assets/imgs/curiosity_camera_red.png">
        <img id="curi_part_cam_01" src="assets/imgs/curiosity_camera_blue.png">

        <!--Environment Assets-->
        <a-asset-item id="desk_gltf"         src="assets/models/desk/scene.gltf"        crossorigin="anonymous"></a-asset-item>    <!--desk assets-->
        <a-asset-item id="desk_drawer_gltf"  src="assets/models/desk_drawer/scene.gltf" crossorigin="anonymous"></a-asset-item>    <!--drawer assets-->
        <a-asset-item id="3d_printer_gltf"   src="assets/models/3d_printer/scene.gltf"  crossorigin="anonymous"></a-asset-item>    <!--printer asset-->
        <a-asset-item id="holo_base_gltf"    src="assets/models/hologram_base/scene.gltf" crossorigin="anonymous"></a-asset-item>  <!--hologram asset-->
        <a-asset-item id="large_screen_gltf" src="assets/models/large_screen/scene.gltf" crossorigin="anonymous"></a-asset-item>   <!--large screen asset-->
        <a-asset-item id="bigger_screen_gltf" src="assets/models/bigger_screen/scene.gltf" crossorigin="anonymous"></a-asset-item> 

        <!--sojourner assets-->
        <a-asset-item id="soju_body_gltf"   src="assets/models/soju/soju_body/scene.gltf" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="soju_wheel_gltf"  src="assets/models/soju/soju_wheel/scene.gltf" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="soju_laser_gltf"  src="assets/models/soju/laser/scene.gltf"     crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="soju_cam_gltf"    src="assets/models/soju/camera/scene.gltf"    crossorigin="anonymous"></a-asset-item>

        <!--perseverance assets-->
        <a-asset-item id="pers_body_gltf" src="assets/models/perseverance_assets/body/scene.gltf" crossorigin="anonymous"></a-asset-item>   
        <a-asset-item id="pers_cam_gltf" src="assets/models/perseverance_assets/camera/scene.gltf" crossorigin="anonymous"></a-asset-item>   
        <a-asset-item id="pers_MEDA_gltf" src="assets/models/perseverance_assets/MEDA/scene.gltf" crossorigin="anonymous"></a-asset-item>   
        <a-asset-item id="pers_radar_gltf" src="assets/models/perseverance_assets/radar/scene.gltf" crossorigin="anonymous"></a-asset-item>   

        <!--curiosity assets-->
        <a-asset-item id="curi_body_gltf" src="assets/models/curiosity/body/scene.gltf"         crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="curi_hand_gltf" src="assets/models/curiosity/arm/scene.gltf"          crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="curi_bat_gltf"  src="assets/models/curiosity/power_system/scene.gltf" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="curi_cam_gltf"  src="assets/models/curiosity/camera/scene.gltf"       crossorigin="anonymous"></a-asset-item>

        <!--room assets-->
        <a-asset-item id="base_gltf" src="assets/models/full_base_compressed.glb" crossorigin="anonymous"></a-asset-item>   
        <a-asset-item id="nav_gltf" src="assets/models/full_base_nav/scene.gltf" crossorigin="anonymous"></a-asset-item>   

        <!--audio assets-->
        <audio id="abient_music" src="assets/sounds/MS20_song.mp3" preload="auto" anonmymous></audio>
        <audio id="place_sound" src="assets/sounds/item_selected.mp3" preload="auto" anonmymous></audio>
        <audio id="drawer_sound" src="assets/sounds/drawer_sound.mp3" preload="auto" anonmymous></audio>
        <audio id="print_sound" src="assets/sounds/printer_click.mp3" preload="auto" anonmymous></audio>
        <audio id="soj_speak" src="assets/sounds/tech_2.mp3" preload="auto" anonmymous></audio>
        <audio id="pers_speak" src="assets/sounds/tech_1.mp3" preload="auto" anonmymous></audio>
        <audio id="curi_speak" src="assets/sounds/tech_3.mp3" preload="auto" anonmymous></audio>

        <circles-assets/>
      </a-assets>

      <!-- spawnpoint (guessing that it needs to be placed before the circles avatar manager) -->
      <a-entity circles-checkpoint circles-spawnpoint position="1 1.25 1"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="1 1.25 -1"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="-1 1.25 1"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="-1 1.25 -1"></a-entity>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!--SOJOURNER ROOM SET UP-->
      <!--sojourner rover model-->
      <a-entity rover id="rover_sojourner" position="0 1.805 -15.728" rotation="0 0 0" scale="1 1 1" gltf-model="#soju_body_gltf" circles-interactive-object="type:highlight" sound="src:#soj_speak; volume:1; on:speak;">
        <a-entity id="roverText" scale="0.5 0.5 0.5" position="0 1.25 0" circles-description="title_text_front:Sojourner; description_text_front:Hey you help me out! find my pieces to repair me;"></a-entity>
      </a-entity>

      <!--sojourner loose part (laser and camera)-->
      <a-entity circles-pickup-networked id="sj_part_laser_01" position="-1.973 2.856 -13.4" rotation="0 0 90" gltf-model="#soju_laser_gltf" circles-interactive-object="type:highlight"></a-entity>
      <a-entity circles-pickup-networked id="sj_part_camera_02" position="2.76 1.812 -15.09" gltf-model="#soju_cam_gltf" circles-interactive-object="type:highlight"></a-entity>

      <!--sojourner desk-->
      <a-entity id="sojRoom_table" position="2.643 -0.786 -16.858" rotation="0 -61.736 0" gltf-model="#desk_gltf">
        <!--basic drawer-->
        <a-entity id="drawer_00" drawer_anim position="-0.804 -0.50 0.31" gltf-model="#desk_drawer_gltf" circles-interactive-object="type:highlight" sound="src:#drawer_sound; volume:1; on:click;">
          <!--sojourner wheel in drawer-->
          <a-entity circles-pickup-networked id="sj_part_wheel_00" position="0 2.75 0" gltf-model="#soju_wheel_gltf" circles-interactive-object="type:highlight"></a-entity>
        </a-entity>
      </a-entity>

      <!--sojourner screen-->
      <a-entity id="soj_screen" position="2.685 2.646 -14" rotation="0 -120 0" gltf-model="#bigger_screen_gltf">
        <a-entity id="screenTxt" text="baseline:top;" position="0 0.75 0.06" scale="2 2 2"></a-entity>
      </a-entity>

      <!--sojourner holograms-->
      <!--sojourner wheel hologram-->
      <a-entity hologram="redImgId:#soj_wheel_00; blueImgId:#soj_wheel_01;" id="h_base_00" position="-2.767 1.4 -16.95" rotation="0 60 0" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>

      <!--sojourner laser hologram-->
      <a-entity hologram="redImgId:#soj_laser_00; blueImgId:#soj_laser_01;" id="h_base_01" position="-1.969 1.4 -18.25" rotation="0 50 0" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>

      <!--sojourner camera hologram-->
      <a-entity hologram="redImgId:#soj_cam_00; blueImgId:#soj_cam_01;" id="h_base_02" position="3 2.6 -16.62" rotation="0 -60 0" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>


      <!--PERSEVERANCE ROOM SET UP-->
      <!--pers rover model-->
      <a-entity rover id="rover_perseverance" position="-16.6 2.273 9.698" rotation="0 0 0" scale="1 1 1" gltf-model="#pers_body_gltf" circles-interactive-object="type:highlight" sound="src:#pers_speak; volume:1; on:speak;">
        <a-entity id="roverText" scale="0.5 0.5 0.5" position="0 1.5 0" circles-description="title_text_front:Perseverance; description_text_front:Hey you help me out! find my pieces to repair me;"></a-entity>
      </a-entity>

      <!--pers lose part (MEDA)-->
      <a-entity circles-pickup-networked id="pers_part_Meda_05" position="-12.8 2.33 3.88" gltf-model="#pers_MEDA_gltf" circles-interactive-object="type:highlight"></a-entity>

      <!--pers desk -->
      <a-entity position="-19.9 -0.8 5.26" rotation="0 60 0" gltf-model="#desk_gltf">
        <!--basic drawer-->
        <a-entity id="drawer_01" drawer_anim position="-0.804 -0.50 0.31" gltf-model="#desk_drawer_gltf" circles-interactive-object="type:highlight" sound="src:#drawer_sound; volume:1; on:click;">
          <!--object in the drawer-->
          <a-entity circles-pickup-networked id="pers_part_radar_03" position="0 2.737 -0.123" gltf-model="#pers_radar_gltf" circles-interactive-object="type:highlight"></a-entity>
        </a-entity>
      </a-entity>

      <!--Perseverence printer-->
      <a-entity id="printer_00" position="-10 2.76 9.5">
        <!--Printer Circles Button-->
        <a-entity id="prs_pBtn" printer_anim position="-0.12 -0.023 0.328" circles-button scale="0.25 0.25 0.25" sound="src:#print_sound; volume:1; on:click;"></a-entity>
        <!--Printer Model-->
        <a-entity id="printer_model" gltf-model="#3d_printer_gltf">
          <!--Printer Rover Part-->
          <a-entity circles-pickup-networked id="pers_part_cam_04" position="0 -0.22 0.047" gltf-model="#pers_cam_gltf" circles-interactive-object="type:highlight"></a-entity>
        </a-entity>
      </a-entity>

      <!--Perseverence Room Screen -->
      <a-entity id="pers_screen" position="-10.6 2.8 12.54" rotation="0 -119 0" gltf-model="#bigger_screen_gltf">
        <a-entity id="screenTxt" text="baseline:top;" position="0 0.75 0.06" scale="2 2 2"></a-entity>
      </a-entity>

      <!--Perseverance holograms-->
      <!--Perseverance Radar Hologram -->
      <a-entity hologram="redImgId:#pers_part_radar_00; blueImgId:#pers_part_radar_01;" id="h_base_03" position="-17.7 1.4 4.16" rotation="0 24 0" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>

      <!--Perseverance Super Camera Hologram -->
      <a-entity hologram="redImgId:#pers_part_cam_00; blueImgId:#pers_part_cam_01;" id="h_base_04" position="-15 1.4 4.22" rotation="0 -15 0" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>

      <!--Perseverance MEDA Hologram -->
      <a-entity hologram="redImgId:#pers_part_Meda_00; blueImgId:#pers_part_Meda_01;" id="h_base_05" position="-19.7 1.4 14.9" rotation="0 -38.6 0" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>



      <!--CURIOSITY ROOM SET UP-->
      <!--pers rover model-->
      <a-entity rover id="rover_curiosity" position="17 2.8 9.62" gltf-model="#curi_body_gltf" circles-interactive-object="type:highlight" sound="src:#curi_speak; volume:1; on:speak;">
        <a-entity id="roverText" scale="0.5 0.5 0.5" position="0 1.5 0" circles-description="title_text_front:Curiosity; description_text_front:Hey you help me out! find my pieces to repair me;"></a-entity>
      </a-entity>

      <!--pers lose parts (arm and bat)-->
      <a-entity circles-pickup-networked id="curi_part_hand_06" position="20.4 2.39 5.080" rotation="-90 0 0" gltf-model="#curi_hand_gltf" circles-interactive-object="type:highlight"></a-entity>
      <a-entity circles-pickup-networked id="curi_part_bat_07" position="17.675 3.1 15.76" rotation="0 0 -28.6" gltf-model="#curi_bat_gltf" circles-interactive-object="type:highlight"></a-entity>
      <a-entity circles-pickup-networked id="curi_part_cam_08" position="0 0 0" gltf-model="#curi_cam_gltf" circles-interactive-object="type:highlight"></a-entity>
      
      <!--curiosity printer-->
      <a-entity id="printer_01" position="14.8 2.724 14.8" rotation="0 180 0">
        <!--Printer Circles Button-->
        <a-entity id="curi_pBtn" printer_anim position="-0.12 -0.023 0.328" circles-button scale="0.25 0.25 0.25" sound="src:#print_sound; volume:1; on:click;"></a-entity>
        <!--Printer Model-->
        <a-entity id="printer_model2" gltf-model="#3d_printer_gltf">
          <!--Printer Rover Part-->
          <a-entity circles-pickup-networked id="curi_part_cam_08" position="0 0 0" gltf-model="#curi_cam_gltf" circles-interactive-object="type:highlight"></a-entity>
        </a-entity>
      </a-entity>

      <!--Curiosity holograms-->
      <!--Curiosity hand Hologram -->
      <a-entity hologram="redImgId:#curi_part_hand_00; blueImgId:#curi_part_hand_01;" id="h_base_06" position="16.8 1.4 4" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>

      <!--Curiosity battery Hologram -->
      <a-entity hologram="redImgId:#curi_part_bat_00; blueImgId:#curi_part_bat_01;" id="h_base_07" position="13.4 1.4 4" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>

      <!--Curiosity Camera Hologram -->
      <a-entity hologram="redImgId:#curi_part_cam_00; blueImgId:#curi_part_cam_01;" id="h_base_08" position="21.4 2.3 6.3" rotation="0 -38.6 0" scale="0.3 0.3 0.3" gltf-model="#holo_base_gltf">
        <a-image id="holoImg" position="0 3 0" scale="10 10 10"></a-image>
      </a-entity>

      <!--Curiosity Room Screen -->
      <a-entity id="curi_screen" position="22.149 2.8 12.681" rotation="0 -119 0" gltf-model="#bigger_screen_gltf">
        <a-entity id="screenTxt" text="baseline:top;" position="0 0.75 0.06" scale="2 2 2"></a-entity>
      </a-entity>


      <!-- the environment -->
      <a-entity environment="preset:yavapai"></a-entity>
      <a-entity id="bg_music_el" sound="src:#abient_music; autoplay: true; loop:true; volume:0.5;"></a-entity>
      <a-entity id="place_sound_el" sound="src:#place_sound; volume:1.5;"></a-entity>

      <!-- socket connector -->
      <a-entity multi-interactions id="worldManager"></a-entity>

      <!--base models-->
      <a-entity position="0 1.25 0" gltf-model="#base_gltf"></a-entity>
      <a-entity position="0 0.25 0" id="navmesh" gltf-model="#nav_gltf" visible='true' nav-mesh></a-entity>

    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
