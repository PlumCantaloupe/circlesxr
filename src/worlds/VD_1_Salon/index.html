<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>
  </head>
  <body>
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>
    
    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <!-- assets -->
      <a-assets>
        <img id='skyMap' src='/global/assets/textures/equirectangular/WhiteBlue.jpg' crossorigin="anonymous">
        <img id='curtainMap' src='/worlds/VD_1_Salon/assets/textures/curtain.jpg' crossorigin="anonymous">

        <a-asset-item id="salon" src="/worlds/VD_1_Salon/assets/models/salon/scene.gltf"></a-asset-item>
        <!-- <a-asset-item id="salon" src="/worlds/VD_1_Salon/assets/models/Salon.glb" response-type="arraybuffer"></a-asset-item> -->
        <!-- <a-asset-item id="curtain" src="/worlds/VD_1_Salon/assets/models/Curtain.glb" response-type="arraybuffer"></a-asset-item> -->

        <!-- interactive objects -->
        <a-asset-item id="picture-model"   src="/worlds/VD_1_Salon/assets/models/DesmondPicture.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="paper-model"     src="/worlds/VD_1_Salon/assets/models/Clarion.glb" response-type="arraybuffer"></a-asset-item>
        <a-asset-item id="product-model"   src="/worlds/VD_1_Salon/assets/models/DesmondProduct.glb" response-type="arraybuffer"></a-asset-item>

        <!-- 360 -->
        <img id='campfire360' src='/global/assets/textures/equirectangular/Campfire_360.jpg' crossorigin="anonymous">

        <!-- audio -->
        <audio id="salonAmbience-snd" src="/worlds/VD_1_Salon/assets/audio/Salon_ambient.mp3"></audio>
        <audio id="salonRadio-snd" src="/worlds/VD_1_Salon/assets/audio/Radio_InTheMood.mp3"></audio>
        <audio id="streetAmbience-snd" src="/worlds/VD_1_Salon/assets/audio/Salon_steetnoise.mp3"></audio>

        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- a mirror -->
      <a-entity geometry="primitive:plane; width:1; height:1" position="-3.228 1.822 1.052" rotation="0 90 0" scale="6.742 1.667 1.000" 
                circles-platform-mirror="textureSizeDesktop:1024; textureSizeMobile:512; textureSizeHMD:256; color:#002920;"></a-entity>

      <!-- portal back to campfire -->
      <a-entity id="campfire_link"
                position="1.0 1.5 4.2" rotation="0 90 0" scale="1 1 1"
                circles-portal="img_src:#campfire360; title_text:The Fire; link_url:/w/Campfire"></a-entity>

      <!-- artefacts (no narrative audio attached) -->
      <a-entity id="Artefact-Picture" 
                class="interactive"
                position="1.021 1.177 -5.5" rotation="0.0 0.0 0.0" scale="0.01 0.01 0.01"
                gltf-model="#picture-model" 
                shadow="receive:true; cast:true;"
                circles-artefact="inspectScale:0.015 0.015 0.015;
                                  label_offset:0.0 0.6 0.0; arrow_position:down;
                                  title:Viola Desmond;
                                  description:A determined entrepreneur. When Nova Scotia beauty schools would not accept her, as a black woman, she travelled to Atlanta and New York for training. Afterwards, she came back and opened her own beauty schools.;
                                  label_text:Viola Desmond;"></a-entity>

      <a-entity id="Artefact-Paper" 
                class="interactive" 
                position="1.64 0.52 0.64" rotation="-90.0 163 0.0" scale="0.01 0.01 0.01"
                gltf-model="#paper-model" 
                shadow="receive:true; cast:true;"
                circles-artefact="inspectScale:0.03 0.03 0.03; textRotationY:-90.0;
                                  label_offset:0.0 0.3 0.0; arrow_position:down;
                                  title:The Clarion;
                                  description:The Clarion moved from covering exclusively the New Glasgow, Nova Scotia community to being an advocate for racial equality across the province.;
                                  label_text:The Clarion;"></a-entity>

      <a-entity id="Artefact-Product"
                class="interactive"
                position="-2.392 1.058 0.0" rotation="-90.0 35 0.0" scale="0.02 0.02 0.02"
                gltf-model="#product-model" 
                shadow="receive:true; cast:true;"
                circles-artefact="inspectScale:0.1 0.1 0.1; textRotationY:90.0;
                                  label_offset:0.0 0.3 0.0; arrow_position:down;
                                  title:Beauty Product;
                                  description:Viola found it difficult to find beauty products for black women in Nova Scotia, so she started making and selling her own. This would include driving across the province in her car to make deliveries.;
                                  label_text:Beauty Product;"></a-entity>

      <!-- checkpoints -->
      <a-entity circles-checkpoint circles-spawnpoint position="0.6 0.05 1"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="0.6 0.05 -0.97"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="-1.26 0.05 2.0"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="-1.2 0.05 4.3"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="1.0 0.05 -3.15"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="0.6 0.05 3"></a-entity>
      <a-entity circles-checkpoint circles-spawnpoint position="-1 0.05 -3.7"></a-entity>

      <!-- environment -->
      <a-entity id="environment" gltf-model="#salon" scale="1.35 1.35 1.35" circles-sphere-env-map="src:/global/assets/textures/equirectangular/WhiteBlue.jpg" shadow="receive:true; cast:true;"></a-entity>

      <!-- sound -->
      <a-entity position="-5 1.5 -1" circles-sound="type:ambient; src:#salonAmbience-snd; autoplay:true; loop:true; volume:0.7;" ></a-entity>
      <a-entity position="-2 1 -4" circles-sound="type:ambient; src:#salonRadio-snd; autoplay:true; loop:true; volume:5.0;" ></a-entity>
      <a-entity position="-0.5 1.5 5.5" circles-sound="type:ambient; src:#streetAmbience-snd; autoplay:true; loop:true; volume:1.0;" ></a-entity>

      <!-- emulate sun shining throigh window -->
      <a-entity light="type:ambient; color:#FFF; intensity:3.0"></a-entity>
      <a-entity id="sunlight" position="-1.5 2.06 6.5" rotation="-10 0 0" light="type:spot; angle:50; intensity:20.0; color:#d5e4f5; distance:15.0; penumbra:0.1;" circles-platform-shadows></a-entity>

      <a-entity id='skyBox'
                geometry='primitive:sphere; radius:50; segments-height:6; segments-width:6;'
                material='shader:flat; src:#skyMap; side:back;'>
      </a-entity>
    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>



