<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>
  </head>

  <body onload="setup()">
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties background="color:#333333;" >

      <a-camera position="0 1.6 3" rotation="-1 0 0"></a-camera>
      <!-- assets -->
      <a-assets timeout="10000">

        <!-- Aritfact Models -->
          <a-asset-item id="majesticCamera_gltf" src="assets/models/majesticCamera.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="northernElectronicsTelephone_gltf" src="assets/models/northernElectricsTelephone.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="CPUTerminal_gltf" src="assets/models/CPUTerminal.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="lemWood_gltf" src="assets/models/lemWood.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="singerSewingMachine_gltf" src="assets/models/singerSewingMachine.gltf" response-type="arraybuffer"></a-asset-item>

        <!-- Environment -->
        <a-asset-item id="room_gltf" src="assets/models/creativeRoom.gltf" crossorigin="anonymous"></a-asset-item>

        <!-- Images -->
          <img id='lemWood_Tx' src='/worlds/MuseumMysteriesHub/assets/models/lemWood.jpg' crossorigin="anonymous">
          <img id='singerSewingMachine_Tx' src='/worlds/MuseumMysteriesHub/assets/models/singerSewingMachine.jpg' crossorigin="anonymous">
       
        <!-- Hub image -->
          <img id='hub360' src='/worlds/MuseumMysteriesHub/assets/images/MMHubIMG.png' crossorigin="anonymous">

        <!-- loading navmesh. Following instructiosn from here: https://github.com/n5ro/aframe-extras/tree/master/src/pathfinding -->
          
        <!-- Circles' built-in assets [REQUIRED] -->
          <circles-assets/>
      </a-assets>

      <!-- Circles' built-in avatar [REQUIRED] -->
        <circles-manager-avatar/>
      <!-- Room -->
      <a-entity id="room" 
                gltf-model="#room_gltf"
                position="0 0 0"
                shadow></a-entity>

      <!-- Text -->
      <a-entity id="Welcome" position="0.6 2.1 -5.6" scale="1.5 1.5 1.5" rotation="0 0 0" text="value: “Welcome to the Creative Room where you can curate your own exhibit. \nPickup objects off the shelves and place them as you like. \nWhen holding an object, click the information(i) icon to learn more about it!”; color: #fff; width: 4; wrapCount: 65; align: center; tabSize: 4.5; font: /worlds/KIN_Hub/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"></a-entity>     

      <!-- Artifacts -->
          <a-entity id="singerSewingMachine" position="4.2 3.2 -3" rotation="0 0 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#singerSewingMachine_gltf" 
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 -90 0; inspectPosition:0 -0.2 0;
                                      label_offset:0 1.3 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Group Work;
                                      description_back:Men usually go into tech. with a better understanding of tools such as this drill. However, women may not have had the same exposure. Though with positive intentions men taking over exercises with unfamiliar tools prevents women from learning.;
                                      label_text:Singer Sewing Machine;
                                      audio:#Narr_tools-snd; volume:0.4;"
                    shadow="receive:false; cast:false;"></a-entity>
          <a-entity id="lemWood" position="4 1.2 0.5" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#lemWood_gltf" 
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.5 0;
                                      label_offset:0 0.9 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Group Work;
                                      description_back:Men usually go into tech. with a better understanding of tools such as this drill. However, women may not have had the same exposure. Though with positive intentions men taking over exercises with unfamiliar tools prevents women from learning.;
                                      label_text:Lunar Excursion Module, Wood Model;
                                      audio:#Narr_tools-snd; volume:0.4;"
                    shadow="receive:false; cast:false;"></a-entity>  
          <a-entity id="CPUTerminal" position="4.5 3.2 -1" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#CPUTerminal_gltf"
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.4 0;
                                      label_offset:0 1 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Group Work;
                                      description_back:Men usually go into tech. with a better understanding of tools such as this drill. However, women may not have had the same exposure. Though with positive intentions men taking over exercises with unfamiliar tools prevents women from learning.;
                                      label_text:CPU Terminal;
                                      audio:#Narr_tools-snd; volume:0.4;"
                    shadow="cast:true; receive:true;"></a-entity>
          <a-entity id="majesticCamera" position="4.5 1.2 -1" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#majesticCamera_gltf"
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.2 0;
                                      label_offset:0 0.6 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Group Work;
                                      description_back:Men usually go into tech. with a better understanding of tools such as this drill. However, women may not have had the same exposure. Though with positive intentions men taking over exercises with unfamiliar tools prevents women from learning.;
                                      label_text:Majestic Camera;
                                      audio:#Narr_tools-snd; volume:0.4;"
                    shadow="cast:true; receive:true;"></a-entity>
          <a-entity id="northernElectricsTelephone" position="4.5 1.2 -3" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#northernElectronicsTelephone_gltf"
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.2 0;
                                      label_offset:0 0.8 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Group Work;
                                      description_back:Men usually go into tech. with a better understanding of tools such as this drill. However, women may not have had the same exposure. Though with positive intentions men taking over exercises with unfamiliar tools prevents women from learning.;
                                      label_text:Northern Electrics Telephone;
                                      audio:#Narr_tools-snd; volume:0.4;"
                    shadow="cast:true; receive:true;"></a-entity>


      <!-- Back to hub -->
      <a-entity position="-6.2 0 0" rotation="0 -90 0">
        <a-entity id="backToHubTXT" 
                  position="0 3 0" scale="1.5 1.5 1.5" rotation="0 180 0"
                  text="value: Back To Hub; color: #f29f05; width: 3; wrapCount: 30; align: center; tabSize: 4.43; font: /worlds/KIN_Hub/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"></a-entity>
        <a-entity id="HubLink"
                  position="0 1.5 0" rotation="0 90 0" scale="1 1 1"
                  circles-portal="img_src:#hub360; title_text:Click me to be teleported; color:black; link_url:/w/MuseumMysteriesHub"></a-entity>
      </a-entity>
      <!------------------------------------------------------------------------------->
      <!-- Checkpoints -->
      <!--storageRoom-->
        <a-entity circles-checkpoint circles-spawnpoint position="0 0.05 0"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 0"></a-entity>
        <a-entity circles-checkpoint position="3 0.05 0"></a-entity>
        <a-entity circles-checkpoint position="0 0.05 -3"></a-entity>
        <a-entity circles-checkpoint position="3 0.05 -3"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 -3"></a-entity>
        <a-entity circles-checkpoint position="0 0.05 4"></a-entity>
        <a-entity circles-checkpoint position="3 0.05 4"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 4"></a-entity>

        <a-entity circles-checkpoint position="-4 0.05 -7.7"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 -11.5"></a-entity>
        <a-entity circles-checkpoint position="-8 0.05 -11.5"></a-entity>
        
        <a-entity circles-checkpoint position="-13.8 0.05 -8.5"></a-entity>
        <a-entity circles-checkpoint position="-13.8 0.05 -11.5"></a-entity>
        <a-entity circles-checkpoint position="-13.8 0.05 -14"></a-entity>



      <!------------------------------------------------------------------------------->
      <!-- lighting -->
        <a-entity id='skyBox'
                  rotation='0 200 0'
                  geometry='primitive:sphere; radius:50; segments-height:24; segments-width:24;'
                  material='shader:flat; src:#skyMap; side:back;'>
        </a-entity>
        <a-entity light="type:ambient; color:#FFF; intensity:3.0"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1.0" position="0 1 1"></a-entity>

        
        <!-- this is magic code created when the node server runs -->
        <!-- //VERY HANDY! https://socket.io/docs/v3/emit-cheatsheet/  -->
        <script src="/socket.io/socket.io.js"></script>
        <script>
            const socket = io();

            socket.on('connect', (userData) => {
                console.log('I exist!');
            });
        </script>
    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
