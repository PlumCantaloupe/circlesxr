<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>
  </head>

  <body onload="setup()">
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties background="color:#333333;" >
      
      <a-entity>
        <audio id="Narr_sewing_snd" src="artifact01_sewingmachine.mp3" preload="auto"></audio>
        <audio id="Narr_clock_snd" src="src/worlds/MM_CreativeMode/assets/audio/artifact02_clock.mp3" preload="auto"></audio>
        <audio id="Narr_LEM_snd" src="src/worlds/MM_CreativeMode/assets/audio/artifact03_LEM.mp3" preload="auto"></audio>
        <audio id="Narr_telephone_snd" src="src/worlds/MM_CreativeMode/assets/audio/artifact04_telephone.mp3" preload="auto"></audio>
        <audio id="Narr_computer_snd" src="src/worlds/MM_CreativeMode/assets/audio/artifact05_computer.mp3" preload="auto"></audio>
        <audio id="Narr_camera_snd" src="src/worlds/MM_CreativeMode/assets/audio/artifact06_camera.mp3" preload="auto"></audio>
      </a-entity>
      

      <a-camera position="0 1.6 3" rotation="-1 0 0"></a-camera>
      <!-- assets -->
      <a-assets timeout="10000">

        <!-- Aritfact Models -->
          <a-asset-item id="majesticCamera_gltf" src="assets/models/majesticCamera.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="northernElectronicsTelephone_gltf" src="assets/models/northernElectricsTelephone.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="CPUTerminal_gltf" src="assets/models/CPUTerminal.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="lemWood_gltf" src="assets/models/lemWood.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="singerSewingMachine_gltf" src="assets/models/singerSewingMachine.gltf" response-type="arraybuffer"></a-asset-item>
          <a-asset-item id="clock_gltf" src="assets/models/clock.gltf" response-type="arraybuffer"></a-asset-item>

        <!-- Environment -->
        <a-asset-item id="room_gltf" src="assets/models/creativeRoom.gltf" crossorigin="anonymous"></a-asset-item>

        <!-- Images
          <img id='lemWood_Tx' src='/worlds/MuseumMysteriesHub/assets/models/lemWood.jpg' crossorigin="anonymous">
          <img id='singerSewingMachine_Tx' src='/worlds/MuseumMysteriesHub/assets/models/singerSewingMachine.jpg' crossorigin="anonymous">
        -->
        <!-- Hub image -->
          <img id='hub360' src='/worlds/MuseumMysteriesHub/assets/images/MMHubIMG.png' crossorigin="anonymous">

        <!-- loading navmesh. Following instructiosn from here: https://github.com/n5ro/aframe-extras/tree/master/src/pathfinding -->
          
        <!-- Circles' built-in assets [REQUIRED] -->
          <circles-assets/>
      </a-assets>

      <!-- Circles' built-in avatar [REQUIRED] -->
        <circles-manager-avatar/>
      <!-- Room -->
      <a-entity id="room" 
                gltf-model="#room_gltf"
                position="0 0 0"
                shadow></a-entity>

      <!-- Text -->
      <a-entity id="Welcome" position="0.6 2.1 -5.6" scale="1.5 1.5 1.5" rotation="0 0 0" text="value: “Welcome to the Creative Room where you can curate your own exhibit. \nPickup objects off the shelves and place them as you like. \nWhen holding an object, click the information(i) icon to learn more about it!”; color: #fff; width: 4; wrapCount: 65; align: center; tabSize: 4.5; font: /worlds/KIN_Hub/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"></a-entity>     

      <!-- Artifacts -->
          <a-entity id="singerSewingMachine" sound="src: #Narr_sewing_snd" position="4.2 2.8 -3" rotation="0 0 0" scale="0.6 0.6 0.6"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#singerSewingMachine_gltf" 
                    circles-pickup-networked
                    circles-artefact="inspectScale:0.6 0.6 0.6; textRotationY:90; inspectRotation:0 -90 0; inspectPosition:0 -0.2 0;
                                      label_offset:0 1 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description_back:This was one of many portable electronic sewing machines developed and released by Singer throughout 
                                      the early-to-mid 20th century. This model was in use up to the 1970’s. However, 
                                      Singer continues to build and sell sewing machines, equipment and attachments to this day.;                                      
                                      title_back:Singer Sewing Machine;
                                      description_back:
                                      This was one of many portable electronic sewing machines developed and released by Singer throughout the early-to-mid 20th century. 
                                      This model was in use up to the 1970’s. however, Singer continues to build and sell sewing machines, equipment and attachments to this day.;
                                      label_text: Singer Sewing Machine;
                                      audio:#Narr_sewing_snd;
                                      volume:2;"        
                    shadow="receive:false; cast:false;"></a-entity>
          <a-entity id="CPUTerminal" sound="src: #Narr_computer_snd" position="4.5 2.8 -1" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#CPUTerminal_gltf"
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.4 0;
                                      label_offset:0 1 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:CPU Terminal;
                                      description_back:
                                      Nabu was an unsuccessful attempt to break into the newly-developing personal computer market in the 1980’s, 
                                      starting up in Ottawa, Ontario in the hopes of expanding across the country.
                                      However, the company failed due to difficulties acquiring software from external companies and an unsubstantial customer base.;
                                      label_text:CPU Terminal;
                                      audio:#Narr_computer_snd; volume:0.4;"
                    shadow="cast:true; receive:true;"></a-entity>
            <a-entity id="clock" position="4 2.8 1" sound="src: #Narr_clock_snd" rotation="0 0 0"
                      geometry="primitive:octahedron; radius:0.4;"
                      material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                      gltf-model="#clock_gltf"
                      circles-pickup-networked
                      circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.4 0;
                                        label_offset:0 0.8 0; arrow_position:down;
                                        title:Tools Unfamiliarity; 
                                        description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                        title_back:Group Work;
                                        description_back:
                                        A standard analog clock seen in households from the 1900’s to the 1940’s. Pequegnat Arthur Clock Co. was the first mass-production 
                                        clock company in Canada, founded in 1904 in Kitchener, Ontario. The company flourished until the early 1940’s, 
                                        ceasing production in 1943 and finally dissolving in 1964. Today, Pequegnat clocks are sought after by collectors across Canada.;
                                       
                                        label_text:Clock;
                                        audio:#Narr_clock_snd; volume:0.4;"
                      shadow="cast:true; receive:true;"></a-entity>

          <a-entity id="lemWood"  sound="src: #Narr_LEM_snd" position="4.3 1.2 0.5" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#lemWood_gltf" 
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 0 0;
                                      label_offset:0 0.8 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Wood Lunar Lander;
                                      description_back:
                                      During the Apollo Program, NASA commissioned multiple aerospace engineering companies for LEM (Lunar Excursion Model) development. 
                                      Of the nine companies that were requested, Grumman Aircraft Engineering created the model that was ultimately accepted.
                                       This wooden model is a representation of a prototype design, which was iterated upon until NASA arrived at the final LEM used in the mission.;  
                                      label_text:Wood Lunar Lander;
                                      audio:#Narr_LEM_snd; volume:0.4;"
                    shadow="receive:false; cast:false;"></a-entity>  
          <a-entity id="majesticCamera" sound="src: #Narr_camera_snd"  position="4.2 1.2 -1" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#majesticCamera_gltf"
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.2 0;
                                      label_offset:0 0.6 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Majestic Casette Camera;
                                      description_back:
                                      Cameras like this were sold for home photography and stored photos on mini-casette tape. 
                                      While the exact date and manufacturer of this particular model is unknown, 
                                      it can be estimated to be mid-20th century based on its compact, if primitive, design. 
                                      Cassettes were replaced with mini-DV and mini-DVD in the 1990’s.;
                                      
                                      label_text:Majestic Casette Camera;
                                      audio:#Narr_camera_snd; volume:0.4;"
                    shadow="cast:true; receive:true;"></a-entity>
          <a-entity id="northernElectricsTelephone" sound="src: #Narr_telephone_snd"  position="4.3 1.2 -3" rotation="0 -90 0"
                    geometry="primitive:octahedron; radius:0.4;"
                    material="color:blue; emissive:green; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                    gltf-model="#northernElectronicsTelephone_gltf"
                    circles-pickup-networked
                    circles-artefact="inspectScale:1.2 1.2 1.2; textRotationY:90; inspectRotation:0 0 0; inspectPosition:0 -0.2 0;
                                      label_offset:0 0.8 0; arrow_position:down;
                                      title:Tools Unfamiliarity; 
                                      description:'Walking into the lab the first day was exhilarating and terrifying. I’m excited to learn and get comfortable with the tools. But, it's next to impossible when I'm always paired with someone who takes over. I was never exposed to these tools as a child growing up.'';
                                      title_back:Northern Electrics Telephone;
                                      description_back:Artifact #: 1978.0123.001
                                      Date: 1951
                                      Manufacturer: Northern Electric Co. Ltd. of Canada
                                      This is a wired rotary telephone that was standard in the mid-20th century. 
                                      The company, Northern Electric, was one of the original standards of telecommunication companies in North America until the 1960’s, 
                                      when it was bought out by Bell Canada. This particular model was found in Montreal, Quebec.;
                                      
                                      label_text:Northern Electrics Telephone;
                                      audio:#Narr_telelphone_snd; volume:0.4;"
                    shadow="cast:true; receive:true;"></a-entity>


      <!-- Back to hub -->
      <a-entity position="-6.2 0.5 0" rotation="0 -90 0">
        <a-entity id="backToHubTXT" 
                  position="0 3 0" scale="1.5 1.5 1.5" rotation="0 180 0"
                  text="value: Back To Hub; color: #f29f05; width: 3; wrapCount: 30; align: center; tabSize: 4.43; font: /worlds/KIN_Hub/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"></a-entity>
        <a-entity id="HubLink"
                  position="0 1.5 0" rotation="0 90 0" scale="1 1 1"
                  circles-portal="img_src:#hub360; title_text:Click me to be teleported; color:black; link_url:/w/MuseumMysteriesHub"></a-entity>
      </a-entity>
      <!------------------------------------------------------------------------------->
      <!-- Checkpoints -->
      <!--storageRoom-->
        <a-entity circles-checkpoint circles-spawnpoint position="0 0.05 0"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 0"></a-entity>
        <a-entity circles-checkpoint position="3 0.05 0"></a-entity>
        <a-entity circles-checkpoint position="0 0.05 -3"></a-entity>
        <a-entity circles-checkpoint position="3 0.05 -3"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 -3"></a-entity>
        <a-entity circles-checkpoint position="0 0.05 4"></a-entity>
        <a-entity circles-checkpoint position="3 0.05 4"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 4"></a-entity>

        <a-entity circles-checkpoint position="-4 0.05 -7.7"></a-entity>
        <a-entity circles-checkpoint position="-4 0.05 -11.5"></a-entity>
        <a-entity circles-checkpoint position="-10 0.05 -11.5"></a-entity>
        
        <!--podiums-->
        <a-entity circles-checkpoint position="-14.5 0.05 -8.7"></a-entity>
        <a-entity circles-checkpoint position="-14.5 0.05 -11.7"></a-entity>
        <a-entity circles-checkpoint position="-14.5 0.05 -14.8"></a-entity>
        
        <a-entity circles-checkpoint position="-5.7 0.05 -14.5"></a-entity>
        <a-entity circles-checkpoint position="-8.5 0.05 -14.5"></a-entity>
        <a-entity circles-checkpoint position="-11.5 0.05 -14.5"></a-entity>



      <!------------------------------------------------------------------------------->
      <!-- lighting -->
        <a-entity id='skyBox'
                  rotation='0 200 0'
                  geometry='primitive:sphere; radius:50; segments-height:24; segments-width:24;'
                  material='shader:flat; src:#skyMap; side:back;'>
        </a-entity>
        <a-entity light="type:ambient; color:#FFF; intensity:3.0"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1.0" position="0 1 1"></a-entity>

        
        <!-- this is magic code created when the node server runs -->
        <!-- //VERY HANDY! https://socket.io/docs/v3/emit-cheatsheet/  -->
        <script src="/socket.io/socket.io.js"></script>
        <script>
            const socket = io();

            socket.on('connect', (userData) => {
                console.log('I exist!');
            });
        </script>
    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
