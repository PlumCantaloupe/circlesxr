<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>
    <!-- Physics script goes after the Circles' head scripts [IMPORTANT]-->
    <script src="/global/js/libs/aframe-physics-system.min.js"></script>
    <script src="/worlds/KIN_ShootAndDrop/components/physics-object.js"></script>
    <script src="/worlds/KIN_ShootAndDrop/components/collision-indicator.js"></script>
    <script src="/worlds/KIN_ShootAndDrop/scripts/experiment-functions.js"></script>
  </head>

  <body onload="setup()">
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties physics="debug:false; gravity:-9.8; friction: 0.1; restitution: 0.5;" background="color:#fff;" fog="type:linear; color:#fff; far:30; near:0">

      <a-camera position="0 1.4 3" rotation="-1 0 0"></a-camera>
      <!-- assets -->
      <a-assets timeout="10000">

        <!-- Aritfact Models -->
        <a-asset-item id="human_obj" src="/worlds/MuseumMysteriesHub/assets/models/scaleReference.obj"></a-asset-item>
        <a-asset-item id="human_mtl" src="/worlds/MuseumMysteriesHub/assets/models/scaleReference.mtl"></a-asset-item>
       

        <!-- Environment -->


        <!-- Images -->
        <img id='walltx' src='/worlds/MuseumMysteriesHub/assets/images/wall.png' crossorigin="anonymous">
        <img id='floortx' src='/worlds/MuseumMysteriesHub/assets/images/floor.png' crossorigin="anonymous">
       
        <!-- Hub image -->
        <img id='hub360' src='/worlds/MuseumMysteriesHub/assets/images/MMHub.png' crossorigin="anonymous">

        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in avatar [REQUIRED] -->
      <circles-manager-avatar/>
      <a-entity obj-model="obj: #human_obj; mtl: #human_mtl" position="1 0 0"></a-entity>

      <!-- Floor -->
      <a-entity id="floor" position="0 -1 -5"  geometry="primitive:box; depth:30; width:30; height:1;" material="color:#f2b90c;" body="type:static; mass:0; shape:box;" circles-shadow></a-entity>
      <a-entity id="TitleText" position="0 0.05 -2.5" rotation="-90 0 0" scale="12 12 12" text="value:Exhibit Room; color: #c79600; width: 1; wrapCount: 30; align: center; tabSize: 4.43; font: /worlds/KIN_ShootAndDrop/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"></a-entity>
      
      <a-entity id="room" position="0 0 3">
        <!------------------------------------------------------------------------------->
        <!-- Floor -->
        <a-box position="-1.75 -0.5 -7.5" height="35" width="35" depth="1" rotation="-90 0 0" material="src:#floortx" static-body="shape: plane;" circles-shadow></a-box>
        <!-- Ceiling -->
        <a-box position="0 9.75 -7.5" height="35" width="35" depth="1" rotation="-90 0 0" material="color:#BFB4A1" static-body="shape: plane;" circles-shadow></a-box>

        <!------------------------------------------------------------------------------->
        <!-- Walls -->
        <a-entity id="wallF"
                  geometry="primitive:plane; height:10; width:11;"
                  position="0 4.8 -8"
                  material="src:#walltx"></a-entity>
        <a-entity id="wallB"
                  geometry="primitive:plane; height:10; width:11;"
                  position="0 4.8 2"
                  rotation="0 180 0"
                  material="src:#walltx"></a-entity>
        <a-entity id="wallR"
                  geometry="primitive:plane; height:10; width:15;"
                  position="-5.5 4.8 -5"
                  rotation="0 90 0"
                  material="src:#walltx"></a-entity>
        <a-entity id="wallL"
                  geometry="primitive:plane; height:10; width:15;"
                  position="5.5 4.8 -5"
                  rotation="0 -90 0"
                  material="src:#walltx"></a-entity>
      </a-entity>

      <!-- Artifacts -->
      <a-entity id="artifacts" position="0 1 -1" rotation="0 -90 0">  
        <a-entity id="torus_knot" position="0 1 -5"
                  geometry="primitive:torusKnot; radius:0.2; radiusTubular:0.05; segmentsTubular:128; segmentsRadial:16;"
                  material="color:yellow; emissive:red; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                  circles-pickup-object="pickupScale:0.5 0.5 0.5;"
                  circles-pickup-networked 
                  shadow="cast:true; receive:true;"></a-entity>
        <a-entity id="torus_knot" position="1 1 -5"
                  geometry="primitive:torusKnot; radius:0.2; radiusTubular:0.05; segmentsTubular:128; segmentsRadial:16;"
                  material="color:yellow; emissive:red; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                  circles-pickup-object="pickupScale:0.5 0.5 0.5;"
                  circles-pickup-networked 
                  shadow="cast:true; receive:true;"></a-entity>
        <a-entity id="torus_knot" position="2 1 -5"
                  geometry="primitive:torusKnot; radius:0.2; radiusTubular:0.05; segmentsTubular:128; segmentsRadial:16;"
                  material="color:yellow; emissive:red; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                  circles-pickup-object="pickupScale:0.5 0.5 0.5;"
                  circles-pickup-networked 
                  shadow="cast:true; receive:true;"></a-entity>
        <a-entity id="torus_knot" position="3 1 -5"
                  geometry="primitive:torusKnot; radius:0.2; radiusTubular:0.05; segmentsTubular:128; segmentsRadial:16;"
                  material="color:yellow; emissive:red; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                  circles-pickup-object="pickupScale:0.5 0.5 0.5;"
                  circles-pickup-networked 
                  shadow="cast:true; receive:true;"></a-entity>
        <a-entity id="torus_knot" position="4 1 -5"
                  geometry="primitive:torusKnot; radius:0.2; radiusTubular:0.05; segmentsTubular:128; segmentsRadial:16;"
                  material="color:yellow; emissive:red; emissiveIntensity:0.7; metalness:0.3; roughness:0.8;" 
                  circles-pickup-object="pickupScale:0.5 0.5 0.5;"
                  circles-pickup-networked 
                  shadow="cast:true; receive:true;"></a-entity>
      </a-entity>

      <!-- Back to hub -->
      <a-entity class="backToLabel" position="0 0 3.5" rotation="-90 0 180" text="value:Back to; color: #c79600; width: 1.7; wrapCount: 30; align: center; tabSize: 4.43; font: /worlds/KIN_ShootAndDrop/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"  scale="4.5 4.5 4.5"></a-entity>
      <a-entity class="panelLabel" position="0 0 3" rotation="-90 0 180" text="value:Hub; color: #c79600; width: 1.7; wrapCount: 30; align: center; tabSize: 4.43; font: /worlds/KIN_ShootAndDrop/assets/font/BebasNeue-Regular-msdf.json; negate: false; lineHeight: 60"  scale="5 5 5"></a-entity>
      <a-entity id="HubLink"
                position="0 1.5 4.33" rotation="0 90 0" scale="1 1 1"
                circles-portal="img_src:#hub360; title_text:Click me to be teleported; link_url:/w/MuseumMysteriesHub"></a-entity>

      <!------------------------------------------------------------------------------->
      <!-- Checkpoints -->
      <a-entity circles-checkpoint circles-spawnpoint position="0 0.05 0"></a-entity>

      <!------------------------------------------------------------------------------->
      <!-- lighting -->
      <a-entity light="type:ambient; color:#FFF; intensity:3.0"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 1.0" position="0 1 1"></a-entity>
    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
